<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wafer holder motion system: soft_wafer_holder_system_controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">wafer holder motion system<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">soft_wafer_holder_system_controller </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >contains wafer holder system controller source code</p>
<ul>
<li>author: Sami dhiab</li>
<li>email: <a href="#" onclick="location.href='mai'+'lto:'+'sam'+'i@'+'the'+'io'+'n.d'+'e'; return false;">sami@<span class="obfuscator">.nosp@m.</span>thei<span class="obfuscator">.nosp@m.</span>on.de</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Concept (version 0.1)</h1>
<p >the image below explains how concept is made:</p>
<p ><img src="docs/whs_controller.jpg" alt="concept" class="inline"/></p>
<p >the wafer holder motion system is based on two subsystem:</p><ul>
<li>delta motion system</li>
<li>keyence distance sensor controller</li>
</ul>
<p >these 2 subsystems shall run on independant processes and communicate with a controller process via socket.</p>
<p >the image below show some output after running first tests: <img src="docs/whs_controller.png" alt="test" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Concept (version 0.2)</h1>
<p >After including the keyence sdk, the server bridge in the above foto is neglected and keyence lib sdk will be directly included in the whs controller class (without server) to controll the keyence controller and get mesurement.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
dependencies</h1>
<p >The whs controller lib depends on:</p><ul>
<li>1. keyence_sdk submodule: see dependecies/</li>
<li>2. software_repetier_rest_api submodule: see dependencies/</li>
</ul>
<ol type="1">
<li>keyence lib rely on 3 dlls (dynamic libaries). these dlls must be included in the same folder as the .exe file (see build/debug/) for debug or (build/release/) for release version. see dependencies/lib_keyence_sdk/includes</li>
<li>repetier (delta) lib rely on:<ul>
<li>pip modules: see requirements.txt</li>
<li>delta_server.py: run this server as subprocess and process data. see dependencies/software_repetier_rest_api/src/repetier_manager_lib/ </li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md4"></a>
Design</h1>
<p >the design should rely on mvc pattern (model-view-control) to comply with the high level architecture and the user interface later. Details can be found in the parent folder.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
doc and APIs</h1>
<p >class documentation is generated by doxygen found inside docs/ . the list of APIs to use the lib: </p><div class="fragment"><div class="line"><span class="comment">// create wafer holder controller</span></div>
<div class="line"><a class="code hl_class" href="classwhs__controller.html">whs_controller</a> wafer_sys_control;</div>
<div class="line"><span class="comment">// keyence interface</span></div>
<div class="line"><span class="comment">// connect to the keyence controller</span></div>
<div class="line">wafer_sys_control.keyence_client_connect();</div>
<div class="line"><span class="comment">// get mesured value output0</span></div>
<div class="line">wafer_sys_control.<a class="code hl_function" href="classwhs__controller.html#ab16fb533a80b921e3e77ba007518e2b7">keyence_client_get_value_output0</a>();</div>
<div class="line"><span class="comment">// get mesured value output1</span></div>
<div class="line">wafer_sys_control.<a class="code hl_function" href="classwhs__controller.html#a8683aedd564371f19d7f7c4ca2df478c">keyence_client_get_value_output1</a>();</div>
<div class="line"><span class="comment">// get mesured value output2</span></div>
<div class="line">wafer_sys_control.<a class="code hl_function" href="classwhs__controller.html#a791573f854d3080d2be0e830ae374597">keyence_client_get_value_output2</a>();</div>
<div class="line"><span class="comment">// delta interface</span></div>
<div class="line"><span class="comment">// run delta subprocess: a server that redirects requests </span></div>
<div class="line">wafer_sys_control.run_delta_subprocess();</div>
<div class="line"><span class="comment">// connecto to that bridge server</span></div>
<div class="line">wafer_sys_control.connect_to_delta_server();</div>
<div class="line"><span class="comment">// get delta current position</span></div>
<div class="line">wafer_sys_control.<a class="code hl_function" href="classwhs__controller.html#afc9f5571d7270784614c1ef1089e666c">get_delta_position</a>();</div>
<div class="ttc" id="aclasswhs__controller_html"><div class="ttname"><a href="classwhs__controller.html">whs_controller</a></div><div class="ttdef"><b>Definition:</b> whs_controller.h:38</div></div>
<div class="ttc" id="aclasswhs__controller_html_a791573f854d3080d2be0e830ae374597"><div class="ttname"><a href="classwhs__controller.html#a791573f854d3080d2be0e830ae374597">whs_controller::keyence_client_get_value_output2</a></div><div class="ttdeci">double keyence_client_get_value_output2()</div><div class="ttdef"><b>Definition:</b> whs_controller.cpp:226</div></div>
<div class="ttc" id="aclasswhs__controller_html_a8683aedd564371f19d7f7c4ca2df478c"><div class="ttname"><a href="classwhs__controller.html#a8683aedd564371f19d7f7c4ca2df478c">whs_controller::keyence_client_get_value_output1</a></div><div class="ttdeci">double keyence_client_get_value_output1()</div><div class="ttdef"><b>Definition:</b> whs_controller.cpp:209</div></div>
<div class="ttc" id="aclasswhs__controller_html_ab16fb533a80b921e3e77ba007518e2b7"><div class="ttname"><a href="classwhs__controller.html#ab16fb533a80b921e3e77ba007518e2b7">whs_controller::keyence_client_get_value_output0</a></div><div class="ttdeci">double keyence_client_get_value_output0()</div><div class="ttdef"><b>Definition:</b> whs_controller.cpp:192</div></div>
<div class="ttc" id="aclasswhs__controller_html_afc9f5571d7270784614c1ef1089e666c"><div class="ttname"><a href="classwhs__controller.html#afc9f5571d7270784614c1ef1089e666c">whs_controller::get_delta_position</a></div><div class="ttdeci">double get_delta_position()</div><div class="ttdef"><b>Definition:</b> whs_controller.cpp:284</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Tests</h1>
<p >unit tests will included under tests/ folder to test teh following:</p><ul>
<li></li>
<li></li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Q&amp;A</h1>
<ol type="1">
<li>if cmake failed to build due to socket dependecies problems, do the following <div class="fragment"><div class="line"><span class="comment">// in file dependencies/lib_keyence_distance_sensor/dependencies/sockpp/include/sockpp/platform.h</span></div>
<div class="line"><span class="comment">// paste these lines anywhere</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib*/</span></div>
<div class="line"><span class="preprocessor">#pragma comment (lib, &quot;Ws2_32.lib&quot;</span>)</div>
<div class="line"><span class="preprocessor">#pragma comment (lib, &quot;Mswsock.lib&quot;</span>)</div>
<div class="line"><span class="preprocessor">#pragma comment (lib, &quot;AdvApi32.lib&quot;</span>)</div>
</div><!-- fragment --></li>
<li>if the executable doesn't run properly, check if the dlls are put in the same folder as teh .exe file </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
